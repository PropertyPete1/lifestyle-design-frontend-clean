(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{344:(e,t,a)=>{Promise.resolve().then(a.bind(a,4460))},4460:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),i=a(2115);a(5012);var o=a(9137),n=a.n(o);function l(e){let{color:t="red",amplitude:a=10,frequency:o=.01,speed:n=1,height:l=60,width:r=300,className:c="",offsetY:d=0,isGlowing:u=!1,thickness:m=2}=e,h=(0,i.useRef)(null),p=(0,i.useRef)(0),g=(0,i.useRef)();return(0,i.useEffect)(()=>{let e=h.current;if(!e)return;let s=e.getContext("2d");if(!s)return;e.width=r,e.height=l;let i=()=>{p.current+=n,s.clearRect(0,0,e.width,e.height),s.beginPath();for(let t=0;t<e.width;t++){let e=l/2+d+a*Math.sin((t+p.current)*o);0===t?s.moveTo(t,e):s.lineTo(t,e)}u?(s.strokeStyle=t,s.lineWidth=m+2,s.shadowBlur=20,s.shadowColor=t,s.globalAlpha=.9):(s.strokeStyle=t,s.lineWidth=m,s.shadowBlur=8,s.shadowColor=t,s.globalAlpha=.8),s.stroke(),s.globalAlpha=1,g.current=requestAnimationFrame(i)};return i(),()=>{g.current&&cancelAnimationFrame(g.current)}},[a,o,n,l,r,t]),(0,s.jsx)("canvas",{ref:h,className:c,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}let r=()=>{let[e,t]=(0,i.useState)({dailyPostLimit:3}),[a,o]=(0,i.useState)(.5),[r,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null),[p,g]=(0,i.useState)(3),[v,f]=(0,i.useState)(3),[y,x]=(0,i.useState)({instagram:{active:!0,todayPosts:0},youtube:{active:!0,todayPosts:0}});(0,i.useEffect)(()=>{let e=async()=>{try{let p=await fetch("http://localhost:3002/api/chart/status");if(p.ok){var e,a,s,i,n,l,r;let v=await p.json();t(v.settings||{dailyPostLimit:3}),c(v.autopilotRunning||!1);let f=v.engagementScore||0;o(f);let w=v.newHighScore||!1;w&&!d&&console.log("\uD83C\uDFC6 New engagement record detected! Activating glow effect."),u(w);let b=v.lastPostTime;if(b&&b!==m&&(console.log("\uD83D\uDCE1 New post detected! Triggering spike animation."),h(b)),(null==(e=v.settings)?void 0:e.dailyPostLimit)&&g(v.settings.dailyPostLimit),v.platformData){let e=y.instagram.todayPosts,t=y.youtube.todayPosts,a=(null==(l=v.platformData.instagram)?void 0:l.todayPosts)||0,s=(null==(r=v.platformData.youtube)?void 0:r.todayPosts)||0;a>e&&console.log("\uD83D\uDCF8 Instagram activity increased: ".concat(e," → ").concat(a," posts")),s>t&&console.log("\uD83C\uDFA5 YouTube activity increased: ".concat(t," → ").concat(s," posts")),x(v.platformData)}console.log("\uD83D\uDCCA Chart connected - Live data updated:",{autopilot:v.autopilotRunning,engagement:f,newRecord:w,instagram:(null==(s=v.platformData)||null==(a=s.instagram)?void 0:a.todayPosts)||0,youtube:(null==(n=v.platformData)||null==(i=n.youtube)?void 0:i.todayPosts)||0})}}catch(e){console.warn("\uD83D\uDCCA Chart connection failed:",e)}};e();let a=setInterval(e,3e3);return()=>clearInterval(a)},[m,d,y.instagram.todayPosts,y.youtube.todayPosts]),(0,i.useEffect)(()=>{let e=Date.now(),t=setInterval(async()=>{try{let t=await fetch("http://localhost:3002/api/events/recent?since=".concat(e));if(t.ok){let a=await t.json();a.events&&a.events.length>0&&(console.log("\uD83D\uDD14 Processing frontend events:",a.events),a.events.forEach(e=>{switch(e.type){case"autopilot-success":console.log("\uD83D\uDE80 Autopilot ".concat(e.data.platform," success detected!")),h(e.data.timestamp),g(e.data.volume),e.data.engagement&&o(e.data.engagement);break;case"post-spike":console.log("\uD83D\uDCE1 Post spike on ".concat(e.data.platform,"!")),h(e.data.timestamp);break;case"new-engagement-record":console.log("\uD83C\uDFC6 New engagement record on ".concat(e.data.platform,"!")),u(!0),setTimeout(()=>u(!1),1e4);break;case"engagement-updated":console.log("\uD83D\uDCCA Engagement updated for ".concat(e.data.platform,": ").concat(e.data.score)),o(e.data.score);break;case"autopilot-toggled":console.log("\uD83C\uDF9B️ Autopilot ".concat(e.data.enabled?"enabled":"disabled","!")),c(e.data.enabled)}})),e=a.timestamp}}catch(e){console.warn("\uD83D\uDD14 Failed to poll for events:",e)}},2e3);return()=>clearInterval(t)},[]),(0,i.useEffect)(()=>{(()=>{let e=Math.max(1,3-.3*(p-1)),t=1.5+(p-1)*.8;f(e),console.log("\uD83D\uDCCA Chart scaling: Volume=".concat(p,", Speed=").concat(e,"s, Thickness=").concat(t,"px"))})()},[p]),(0,i.useEffect)(()=>{let e=e=>{var t,a;let s=(null==(t=e.detail)?void 0:t.volume)||p,i=(null==(a=e.detail)?void 0:a.platform)||"unknown";console.log("\uD83D\uDE80 Autopilot ".concat(i," post successful! Triggering immediate chart update.")),h(Date.now()),g(s),setTimeout(()=>{let e=new Event("force-chart-refresh");window.dispatchEvent(e)},500)},t=e=>{var t,a;let s=(null==(t=e.detail)?void 0:t.type)||"engagement",i=(null==(a=e.detail)?void 0:a.platform)||"unknown";console.log("\uD83C\uDFC6 New ".concat(s," record on ").concat(i,"! Activating glow effect.")),u(!0),setTimeout(()=>{u(!1)},1e4)},a=e=>{var t,a;let s=(null==(t=e.detail)?void 0:t.score)||0,i=(null==(a=e.detail)?void 0:a.platform)||"unknown";console.log("\uD83D\uDCCA ".concat(i," engagement updated: ").concat(s)),o(s)},s=e=>{var t;let a=(null==(t=e.detail)?void 0:t.enabled)||!1;console.log("\uD83C\uDF9B️ Autopilot ".concat(a?"enabled":"disabled","! Chart responding immediately.")),c(a)};return window.addEventListener("autopilot-success",e),window.addEventListener("new-engagement-record",t),window.addEventListener("engagement-updated",a),window.addEventListener("autopilot-toggled",s),()=>{window.removeEventListener("autopilot-success",e),window.removeEventListener("new-engagement-record",t),window.removeEventListener("engagement-updated",a),window.removeEventListener("autopilot-toggled",s)}},[p]);let w=t=>{let s=y[t],i=s.todayPosts,o=s.active,n="instagram"===t?1.2:1.4,l=r?n*Math.max(.8,2-p/10):.4*n,c=Math.min(i/e.dailyPostLimit,1),u="instagram"===t?12:9;return{speed:l,amplitude:r?o?u*(.5+1.5*a):.3*u:.4*u,offsetY:r?o?-20+-25*c:30:25,isGlowing:d&&o}},b=w("instagram"),j=w("youtube");return(0,s.jsxs)("div",{style:{position:"relative",width:"100%",height:"120px",marginTop:"20px",backgroundColor:"#121212",borderRadius:"6px",overflow:"hidden"},className:"jsx-ab4dd1192e423219 chart-container",children:[(0,s.jsx)(l,{color:"rgba(255, 105, 180, 0.9)",speed:b.speed,amplitude:b.amplitude,frequency:.015,height:120,width:800,offsetY:b.offsetY,isGlowing:b.isGlowing,thickness:b.isGlowing?4:2}),(0,s.jsx)(l,{color:"rgba(255, 0, 0, 0.9)",speed:j.speed,amplitude:j.amplitude,frequency:.015,height:120,width:800,offsetY:j.offsetY,isGlowing:j.isGlowing,thickness:j.isGlowing?4:2}),m&&Date.now()-m<3e3&&(0,s.jsx)("div",{style:{position:"absolute",left:"".concat((Date.now()-m)/30%100,"%"),top:0,width:"2px",height:"100%",background:"linear-gradient(to bottom, rgba(255,255,255,0.8), rgba(255,255,255,0.2))",animation:"pulse 0.5s ease-in-out infinite alternate",pointerEvents:"none"},className:"jsx-ab4dd1192e423219"}),(0,s.jsx)(n(),{id:"ab4dd1192e423219",children:"@keyframes pulse{from{opacity:.4}to{opacity:1}}"})]})};var c=a(8274),d=a(760);let u=()=>{let[e,t]=(0,i.useState)({isPosting:!1,growthRate:0,engagement:50,lastPost:new Date().toISOString()}),[a,o]=(0,i.useState)({isPosting:!1,growthRate:0,engagement:50,lastPost:new Date().toISOString()}),[n,l]=(0,i.useState)(!1),[r,u]=(0,i.useState)({ig:!1,yt:!1});(0,i.useEffect)(()=>{let e=async()=>{try{var e,a,s,i,n,r;let c=await fetch("http://localhost:3002/api/chart/status"),d=await c.json(),u=d.platformData||{},m=100*(d.engagementScore||0),h=d.autopilotRunning||!1;t({isPosting:h&&(null==(e=u.instagram)?void 0:e.active),growthRate:(null==(a=u.instagram)?void 0:a.todayPosts)||0,engagement:m,lastPost:new Date(d.lastPostTime||Date.now()).toISOString()}),o({isPosting:h&&(null==(s=u.youtube)?void 0:s.active),growthRate:(null==(i=u.youtube)?void 0:i.todayPosts)||0,engagement:m,lastPost:new Date(d.lastPostTime||Date.now()).toISOString()});let p=d.lastPostTime;(p?Date.now()-p:1/0)<=3e5&&(null==(n=u.instagram)?void 0:n.active)&&(null==(r=u.youtube)?void 0:r.active)&&(l(!0),setTimeout(()=>l(!1),1e4))}catch(e){console.error("Failed to fetch heart data:",e)}};e();let a=setInterval(e,3e4);return()=>clearInterval(a)},[]);let m=e=>{let{platform:t,data:a}=e,i=(e=>({cracked:e.engagement<10,pulseSpeed:e.growthRate>5?"fast":e.growthRate>0?"normal":"slow",spike:!1}))(a),o="instagram"===t?"#E1306C":"#FF0000";return(0,s.jsxs)(c.P.div,{className:"relative",animate:{scale:i.spike?[1,1.2,1]:1},transition:{scale:{duration:2},repeat:"fast"===i.pulseSpeed||"normal"===i.pulseSpeed?1/0:0,repeatDelay:"fast"===i.pulseSpeed?.5:1.5},children:[(0,s.jsxs)(c.P.svg,{width:"60",height:"60",viewBox:"0 0 24 24",className:"drop-shadow-lg ".concat(i.cracked?"opacity-60":""),animate:{filter:a.isPosting?["drop-shadow(0 0 10px ".concat(o,")"),"drop-shadow(0 0 20px ".concat(o,")"),"drop-shadow(0 0 10px ".concat(o,")")]:"drop-shadow(0 0 5px ".concat(o,")")},transition:{duration:1,repeat:a.isPosting?1/0:0},children:[(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:o,className:i.cracked?"opacity-70":""}),i.cracked&&(0,s.jsx)("path",{d:"M12 3L14 8L12 12L10 8Z",stroke:"#666",strokeWidth:"1",fill:"none",className:"animate-pulse"})]}),a.isPosting&&(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(c.P.div,{className:"absolute w-1 h-1 bg-white rounded-full",style:{left:"".concat(20+20*t,"%"),top:"".concat(30+10*t,"%")},animate:{opacity:[0,1,0],scale:[0,1,0],y:[-10,0,10]},transition:{duration:2,repeat:1/0,delay:.5*t}},t))})]})};return(0,s.jsxs)("div",{className:"h-[120px] mt-5 bg-[#121212] border border-[#333] rounded-md p-4 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/10 to-blue-900/10 pointer-events-none"}),(0,s.jsx)("div",{className:"relative z-10 h-full flex items-center justify-center",children:(0,s.jsx)(d.N,{mode:"wait",children:n?(0,s.jsx)(()=>(0,s.jsxs)(c.P.div,{initial:{scale:0,rotate:0},animate:{scale:[0,1.2,1],rotate:[0,360,0]},exit:{scale:0,opacity:0},transition:{duration:1},className:"relative",children:[(0,s.jsx)(c.P.svg,{width:"120",height:"120",viewBox:"0 0 24 24",className:"drop-shadow-2xl",animate:{filter:["drop-shadow(0 0 20px #8B0000)","drop-shadow(0 0 40px #8B0000)","drop-shadow(0 0 20px #8B0000)"]},transition:{duration:1,repeat:1/0},children:(0,s.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",fill:"#8B0000"})}),(0,s.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((e,t)=>(0,s.jsx)(c.P.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{opacity:[0,1,0],scale:[0,1,0],rotate:[0,360]},transition:{duration:1.5,repeat:1/0,delay:.2*t}},t))})]}),{}):(0,s.jsxs)(c.P.div,{className:"flex items-center space-x-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(m,{platform:"instagram",data:e})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(m,{platform:"youtube",data:a})})]})})})]})},m={Instagram:{borderColor:"border-pink-600",icon:"/icons/ig-icon.svg",alt:"Instagram"},YouTube:{borderColor:"border-red-600",icon:"/icons/yt-icon.svg",alt:"YouTube"}},h=e=>{let{posts:t=[]}=e,[a,o]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"activity-feed-compact",children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,s.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0},children:a?"Recent AutoPilot Posts":"Upcoming AutoPilot Posts"}),(0,s.jsx)("button",{onClick:()=>{o(!a)},style:{background:"#8B5CF6",color:"white",border:"none",borderRadius:"6px",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer"},children:a?"Show Upcoming":"Show Recent"})]}),a?0===t.length?(0,s.jsxs)("div",{className:"activity-item",children:[(0,s.jsx)("div",{className:"activity-dot"}),(0,s.jsxs)("div",{className:"activity-content",children:[(0,s.jsx)("div",{className:"activity-title",children:"No recent posts found"}),(0,s.jsx)("div",{className:"activity-time",children:"Check back later"})]})]}):t.map((e,t)=>{let a=m[e.platform];return(0,s.jsxs)("div",{className:"activity-item",style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"#0a0a0a",border:"1px solid #1f1f1f",borderRadius:"8px",marginBottom:"8px"},children:[(0,s.jsx)("div",{style:{width:"60px",height:"60px",borderRadius:"8px",overflow:"hidden",border:"2px solid ".concat("Instagram"===e.platform?"#e91e63":"#f44336"),flexShrink:0},children:(0,s.jsx)("img",{src:e.thumbnailUrl,alt:"".concat(e.platform," post thumbnail"),style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.target.src="/default-video.jpg"}})}),(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsxs)("div",{style:{color:"#fff",fontSize:"14px",fontWeight:"500",marginBottom:"4px"},children:[e.platform," post published"]}),(0,s.jsx)("div",{style:{color:"#888",fontSize:"12px"},children:e.timestamp})]}),(0,s.jsx)("div",{style:{width:"24px",height:"24px",flexShrink:0},children:(0,s.jsx)("img",{src:a.icon,alt:a.alt,style:{width:"100%",height:"100%",filter:"Instagram"===e.platform?"hue-rotate(320deg)":"hue-rotate(0deg)"},onError:e=>{e.target.style.display="none"}})})]},"".concat(e.platform,"-").concat(t))}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"activity-item",children:[(0,s.jsx)("div",{className:"activity-dot"}),(0,s.jsxs)("div",{className:"activity-content",children:[(0,s.jsx)("div",{className:"activity-title",children:"Post auto-published"}),(0,s.jsx)("div",{className:"activity-time",children:"12 minutes ago"})]})]}),(0,s.jsxs)("div",{className:"activity-item",children:[(0,s.jsx)("div",{className:"activity-dot"}),(0,s.jsxs)("div",{className:"activity-content",children:[(0,s.jsx)("div",{className:"activity-title",children:"Story view milestone reached"}),(0,s.jsx)("div",{className:"activity-time",children:"1 hour ago"})]})]}),(0,s.jsxs)("div",{className:"activity-item",children:[(0,s.jsx)("div",{className:"activity-dot"}),(0,s.jsxs)("div",{className:"activity-content",children:[(0,s.jsx)("div",{className:"activity-title",children:"New follower surge detected"}),(0,s.jsx)("div",{className:"activity-time",children:"3 hours ago"})]})]}),(0,s.jsxs)("div",{className:"activity-item",children:[(0,s.jsx)("div",{className:"activity-dot"}),(0,s.jsxs)("div",{className:"activity-content",children:[(0,s.jsx)("div",{className:"activity-title",children:"Engagement goal achieved"}),(0,s.jsx)("div",{className:"activity-time",children:"6 hours ago"})]})]})]})]})};async function p(e){try{let t=await fetch("http://localhost:3002/api/activity/feed?platform=".concat(e,"&limit=5"));if(!t.ok)throw Error("Failed to fetch ".concat(e," posts: ").concat(t.status));return(await t.json()).map(t=>({videoId:t.videoId||t.id||t._id,thumbnailUrl:t.thumbnail||t.thumbnailUrl||t.video_thumbnail,timestampFormatted:t.timestampFormatted||t.timestamp||function(e){try{let t=new Date(e),a=new Date().getTime()-t.getTime(),s=Math.floor(a/6e4),i=Math.floor(a/36e5),o=Math.floor(a/864e5);if(s<60)return"".concat(s,"m ago");if(i<24)return"".concat(i,"h ago");if(o<7)return"".concat(o,"d ago");else return t.toLocaleDateString()}catch(e){return"Recently posted"}}(t.createdAt||t.date),platform:e,title:t.title||"Untitled Post"}))}catch(t){return console.warn("⚠️ Failed to fetch ".concat(e," posts:"),t),[]}}let g=e=>{let{platform:t}=e,[a,o]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{try{let e=(await p(t)).map(e=>({platform:"instagram"===t?"Instagram":"YouTube",thumbnailUrl:e.thumbnailUrl||"/default-video.jpg",timestamp:e.timestampFormatted||"Recently posted"}));o(e)}catch(e){console.warn("Failed to load ".concat(t," posts:"),e),o([])}})()},[t]),(0,s.jsx)(h,{posts:a})},v={autopilot:!1,maxPosts:3,postTime:"14:00",repostDelay:1,manual:!0};function f(){let[e,t]=(0,i.useState)("instagram"),[a,o]=(0,i.useState)(!1),[n,l]=(0,i.useState)(v),c=(0,i.useRef)(0);(0,i.useCallback)((e,t,a)=>(c.current+=1,"".concat(a,"-").concat(t,"-").concat(c.current,"-").concat(Math.random().toString(36).substr(2,5))),[]);let[d,m]=(0,i.useState)({instagram:{followers:"24.8K",engagement:"4.7%",reach:"89.2K",autoPostsPerDay:"".concat(n.maxPosts,"/day")},youtube:{subscribers:"N/A",watchTime:"N/A",views:"N/A",autoUploadsPerWeek:"2/week"}}),[h,p]=(0,i.useState)(!0),[f,y]=(0,i.useState)([]),[x,w]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),[N,D]=(0,i.useState)("idle"),[k,C]=(0,i.useState)(3),[S,P]=(0,i.useState)(.65),[T,E]=(0,i.useState)(!1),[A,M]=(0,i.useState)(null),[F,I]=(0,i.useState)(0),[R,L]=(0,i.useState)({instagram:!0,youtube:!0}),[B,O]=(0,i.useState)({instagram:{active:!1,todayPosts:0,reach:0,engagement:0},youtube:{active:!1,todayPosts:0,reach:0,engagement:0}}),[U,Y]=(0,i.useState)(0),[W,z]=(0,i.useState)([]),[G,q]=(0,i.useState)([]),[_,K]=(0,i.useState)(!0),[H,V]=(0,i.useState)(null),[X,Z]=(0,i.useState)(0),[J,Q]=(0,i.useState)(0),$=(0,i.useCallback)(async()=>{try{p(!0);let[e,t]=await Promise.all([fetch("https://lifestyle-design-backend-v2.onrender.com/api/instagram/analytics"),fetch("https://lifestyle-design-backend-v2.onrender.com/api/youtube/analytics")]),a={},s={};if(e.ok){let t=await e.json();t.success&&t.analytics&&(a=t.analytics,console.log("✅ Instagram analytics loaded:",a.formatted))}else console.warn("⚠️ Failed to load Instagram analytics");if(t.ok){let e=await t.json();e.success&&e.analytics&&(s=e.analytics,console.log("✅ YouTube analytics loaded:",s.formatted))}else 400===t.status?console.warn("⚠️ YouTube analytics requires credentials configuration"):console.warn("⚠️ Failed to load YouTube analytics");let i=a.formatted,o=s.formatted;m(e=>({instagram:{followers:(null==i?void 0:i.followers)||e.instagram.followers,engagement:(null==i?void 0:i.engagement)||e.instagram.engagement,reach:(null==i?void 0:i.reach)||e.instagram.reach,autoPostsPerDay:"".concat(n.maxPosts,"/day")},youtube:{subscribers:(null==o?void 0:o.subscribers)||e.youtube.subscribers,watchTime:(null==o?void 0:o.watchTime)||e.youtube.watchTime,views:(null==o?void 0:o.views)||e.youtube.views,autoUploadsPerWeek:"2/week"}}))}catch(e){console.error("❌ Failed to load analytics:",e)}finally{p(!1)}},[n.maxPosts]);(0,i.useCallback)(async()=>{try{console.log("\uD83D\uDD04 Refreshing all dashboard data...");let e=await et();z(e),await ee(),await $();try{let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/settings");if(e.ok){let t=await e.json();l({autopilot:t.autopilot||!1,manual:!1!==t.manual,maxPosts:t.maxPosts||3,postTime:t.postTime||"14:00",repostDelay:t.repostDelay||1}),t.autopilotPlatforms&&L({instagram:t.autopilotPlatforms.instagram||!1,youtube:t.autopilotPlatforms.youtube||!1})}}catch(e){console.warn("⚠️ Settings refresh failed:",e)}console.log("✅ All dashboard data refreshed")}catch(e){console.error("❌ Failed to refresh dashboard data:",e)}},[]);let ee=(0,i.useCallback)(async()=>{try{console.log("\uD83D\uDD0D Fetching upcoming AutoPilot posts...");let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/autopilot/queue?limit=3");if(e.ok){let t=(await e.json()).posts||[];return console.log("\uD83D\uDCC5 Upcoming posts:",t),q(t),t}}catch(e){console.warn("⚠️ Could not fetch queued posts:",e),q([])}return[]},[]),et=(0,i.useCallback)(async()=>{try{let n=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/chart/status");if(n.ok){let l=await n.json();if(console.log("\uD83D\uDD25 Chart reactive data:",l),P(l.engagementScore||.65),w(l.autopilotRunning||!1),E(l.newHighScore||!1),M(l.lastPostTime),l.platformData){var e,t,a,s,i,o;O({instagram:{active:(null==(e=l.platformData.instagram)?void 0:e.active)||!1,todayPosts:(null==(t=l.platformData.instagram)?void 0:t.todayPosts)||0,reach:(null==(a=l.platformData.instagram)?void 0:a.reach)||0,engagement:S},youtube:{active:(null==(s=l.platformData.youtube)?void 0:s.active)||!1,todayPosts:(null==(i=l.platformData.youtube)?void 0:i.todayPosts)||0,reach:(null==(o=l.platformData.youtube)?void 0:o.reach)||0,engagement:S}})}l.settings&&C(l.settings.dailyPostLimit||3)}}catch(e){console.warn("⚠️ Chart status not available")}try{let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/activity/feed?limit=20");if(e.ok){let t=(await e.json()).data||[];return console.log("\uD83D\uDCCA Enhanced activity data:",t.slice(0,3)),t}}catch(e){console.warn("⚠️ Enhanced activity not available, trying autopilot endpoint...")}try{let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/autopilot/activity?limit=20");if(e.ok){let t=(await e.json()).posts||[];return console.log("\uD83D\uDCCA Autopilot activity data:",t.slice(0,3)),t}}catch(e){console.warn("⚠️ Autopilot activity endpoint not available, using final fallback...")}return console.warn("⚠️ All activity endpoints failed, using empty data"),[]},[]),ea=(0,i.useRef)(null),es=(0,i.useRef)(null),ei=(0,i.useRef)(null);(0,i.useEffect)(()=>{async function e(){try{let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/settings");if(e.ok){let t=await e.json();l({autopilot:t.autopilot||!1,manual:!1!==t.manual,maxPosts:t.maxPosts||3,postTime:t.postTime||"14:00",repostDelay:t.repostDelay||1})}else console.warn("⚠️ No settings found, using defaults.");try{let e=await et();z(e);let t=new Date,a=[...Array(7)].map((e,a)=>{let s=new Date(t);return s.setDate(t.getDate()-a),s.toISOString().split("T")[0]}).reverse(),s={instagram:{},youtube:{}};a.forEach(e=>{s.instagram[e]=0,s.youtube[e]=0}),e.forEach(e=>{let t=new Date(e.startTime||e.timestamp).toISOString().split("T")[0];if(a.includes(t)){let a=e.platform||"unknown";("instagram"===a||a.includes("instagram"))&&s.instagram[t]++,("youtube"===a||a.includes("youtube"))&&s.youtube[t]++}});let i=(e,t)=>{let a;if(x){let e=Math.min(k/10,.8);a=1+8*e}else a=.5;let s=x?.5+1.5*S:.3;return t.map(e=>{let t=a+e*s;return Math.max(t,.1)})},o=20*!!T,n=T?6:4;V({labels:a.map(e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Instagram",data:i("instagram",a.map(e=>s.instagram[e])),borderColor:T?"#ff69b4":"hotpink",backgroundColor:"rgba(255, 105, 180, ".concat(T?.2:.1,")"),borderWidth:n,tension:.4+.3*S,pointRadius:T?8:6,pointBackgroundColor:T?"#ff1493":"hotpink",pointBorderColor:"#fff",pointBorderWidth:2,fill:!0,shadowOffsetX:o,shadowOffsetY:o,shadowBlur:o,shadowColor:"rgba(255, 105, 180, 0.6)"},{label:"YouTube",data:i("youtube",a.map(e=>s.youtube[e])),borderColor:T?"#ff0000":"red",backgroundColor:"rgba(255, 0, 0, ".concat(T?.2:.1,")"),borderWidth:n,tension:.4+.3*S,pointRadius:T?8:6,pointBackgroundColor:T?"#cc0000":"red",pointBorderColor:"#fff",pointBorderWidth:2,fill:!0,shadowOffsetX:o,shadowOffsetY:o,shadowBlur:o,shadowColor:"rgba(255, 0, 0, 0.6)"}]}),console.log("\uD83D\uDCCA Chart data generated:",s)}catch(e){console.warn("⚠️ Enhanced activity failed, trying fallback...")}try{let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/scheduler/status");if(e.ok){let t=await e.json();t.success&&(console.log("\uD83D\uDCCA Scheduler Status:",t.data),w(t.data.running||!1))}}catch(e){console.warn("⚠️ Scheduler status not available:",e)}}catch(e){console.error("❌ Failed to load settings for dashboard:",e)}}e(),$();let t=setInterval(e,3e4),a=setInterval(async()=>{try{let e=await et();z(e),console.log("\uD83D\uDD04 Activity feed auto-refreshed")}catch(e){console.warn("⚠️ Activity feed auto-refresh failed:",e)}},6e4);return()=>{clearInterval(t),clearInterval(a)}},[]),(0,i.useEffect)(()=>{m(e=>({...e,instagram:{...e.instagram,autoPostsPerDay:"".concat(n.maxPosts,"/day")}}))},[n]),(0,i.useEffect)(()=>{if(ei.current){ei.current.innerHTML="";for(let t=0;t<20;t++){let t=document.createElement("div");t.className="particle ".concat(e),t.style.left=100*Math.random()+"%",t.style.animationDelay=20*Math.random()+"s",t.style.animationDuration=15+10*Math.random()+"s",ei.current.appendChild(t)}}},[e]),(0,i.useEffect)(()=>{let e=(e,t)=>{if(!e)return;let a=e.getContext("2d");if(!a)return;let s=0,i=()=>{a.clearRect(0,0,e.width,e.height),a.strokeStyle="rgba(255, 255, 255, 0.1)",a.lineWidth=1;for(let t=0;t<=10;t++){let s=e.height/10*t;a.beginPath(),a.moveTo(0,s),a.lineTo(e.width,s),a.stroke()}let o=Math.min(F/10,1),n=Math.min(k/5,1),l=.3*!!x,r=Date.now()-U<5e3?.5*Math.sin(.5*s):0,c=Math.max(o,n),d=50*(.5+.5*c),u=30*(.5+.5*c),m=[],h=.05+Math.min(.03*k,.1);for(let t=0;t<=100;t++){let a=e.width/100*t,i=e.height/2+Math.sin((t+s)*h*2)*d+Math.sin((t+s)*h)*u;m.push({x:a,y:i})}if(x||r>0){let e=l+Math.abs(r);a.shadowColor="youtube"===t?"#ff0000":"#e1306c",a.shadowBlur=20*e,a.shadowOffsetX=0,a.shadowOffsetY=0}let p=a.createLinearGradient(0,0,e.width,0),g=.8+.2*c+l;if("youtube"===t?(p.addColorStop(0,"rgba(255, 0, 0, ".concat(g,")")),p.addColorStop(.5,"rgba(255, 68, 68, ".concat(g,")")),p.addColorStop(1,"rgba(204, 0, 0, ".concat(g,")"))):(p.addColorStop(0,"rgba(255, 68, 88, ".concat(g,")")),p.addColorStop(.5,"rgba(225, 48, 108, ".concat(g,")")),p.addColorStop(1,"rgba(131, 58, 180, ".concat(g,")"))),a.strokeStyle=p,a.lineWidth=2+Math.min(1.5*k,5)+2*c,a.beginPath(),m.forEach((e,t)=>{0===t?a.moveTo(e.x,e.y):a.lineTo(e.x,e.y)}),a.stroke(),r>0){let t=Math.floor(F/2)+3;for(let s=0;s<t;s++){let t=Math.random()*e.width,s=Math.random()*e.height,i=3*Math.random()+1;a.fillStyle="rgba(255, 255, 255, ".concat(.8*Math.abs(r),")"),a.beginPath(),a.arc(t,s,i,0,2*Math.PI),a.fill()}}a.shadowBlur=0,s+=.5,requestAnimationFrame(i)};i()};e(ea.current,"instagram"),e(es.current,"youtube")},[x,F,U]);let eo=async e=>{try{console.log("Switching to ".concat(e)),t(e);try{let t=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/settings");if(t.ok){var a;(null==(a=(await t.json()).autopilotPlatforms)?void 0:a[e])!==!1?el("\uD83D\uDCF1 Switched to ".concat(e.charAt(0).toUpperCase()+e.slice(1))):el("⚠️ ".concat(e.charAt(0).toUpperCase()+e.slice(1)," is currently disabled in autopilot settings"),"error")}else el("\uD83D\uDCF1 Switched to ".concat(e.charAt(0).toUpperCase()+e.slice(1)))}catch(t){console.warn("Could not check platform settings:",t),el("\uD83D\uDCF1 Switched to ".concat(e.charAt(0).toUpperCase()+e.slice(1)))}}catch(e){console.error("Error switching platform:",e),el("❌ Error switching platform","error")}},en=e=>{try{switch(console.log("Menu action:",e),o(!1),e){case"upload":window.location.href="/upload",el("\uD83D\uDCE4 Opening Upload page...");break;case"manual":window.location.href="/manual",el("✍️ Opening Manual Post page...");break;case"autopilot-page":window.location.href="/autopilot",el("\uD83D\uDE80 Opening AutoPilot Dashboard...");break;case"settings":window.location.href="/settings",el("⚙️ Opening Settings...");break;default:console.warn("Unknown menu action:",e),el("❌ Unknown action: "+e,"error")}}catch(e){console.error("Error handling menu click:",e)}},el=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";try{let a=document.createElement("div");a.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ".concat("error"===t?"rgba(239, 68, 68, 0.9)":"info"===t?"rgba(59, 130, 246, 0.9)":"rgba(34, 197, 94, 0.9)",";\n        color: white;\n        padding: 1rem 1.5rem;\n        border-radius: 10px;\n        z-index: 10000;\n        backdrop-filter: blur(10px);\n        animation: slideIn 0.3s ease;\n        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n        border: 1px solid rgba(255, 255, 255, 0.1);\n        font-weight: 500;\n        max-width: 300px;\n      "),a.textContent=e,document.body.appendChild(a),setTimeout(()=>{a.style.animation="slideOut 0.3s ease",setTimeout(()=>{a.parentNode&&a.remove()},300)},3e3)}catch(e){console.error("Error showing notification:",e)}},er=async()=>{if(!b){j(!0);try{let e=await fetch("https://lifestyle-design-backend-v2.onrender.com/api/autopilot/manual-post",{method:"POST",headers:{"Content-Type":"application/json"}});(await e.json()).success?(el("✅ Posted successfully!","success"),$(),et()):el("❌ Post failed","error")}catch(e){el("❌ Connection error","error")}setTimeout(()=>{j(!1)},2e3)}};return(0,i.useEffect)(()=>{let e=e=>{let t=document.querySelector(".menu-container");(null==t?void 0:t.contains(e.target))||!a||o(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[a]),(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a&&o(!1),"1"===e.key&&e.ctrlKey&&(e.preventDefault(),eo("instagram")),"2"===e.key&&e.ctrlKey&&(e.preventDefault(),eo("youtube")),"u"===e.key&&e.ctrlKey&&(e.preventDefault(),en("upload"))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"floating-particles",ref:ei}),(0,s.jsx)("div",{className:"menu-overlay ".concat(a?"show":""),onClick:()=>o(!1)}),(0,s.jsxs)("div",{className:"dashboard-container",children:[(0,s.jsxs)("header",{className:"header",children:[(0,s.jsxs)("div",{className:"platform-switcher",children:[(0,s.jsx)("button",{className:"platform-btn instagram ".concat("instagram"===e?"active":""),onClick:()=>eo("instagram"),children:"\uD83D\uDCF7 Instagram"}),(0,s.jsx)("button",{className:"platform-btn youtube ".concat("youtube"===e?"active":""),onClick:()=>eo("youtube"),children:"▶️ YouTube"})]}),(0,s.jsx)("div",{className:"logo",children:"Lifestyle Design Social"}),(0,s.jsxs)("div",{className:"header-right",children:[(0,s.jsxs)("div",{className:"menu-container",children:[(0,s.jsx)("div",{className:"menu-btn ".concat(a?"active":""),onClick:()=>{try{o(!a)}catch(e){console.error("Error toggling menu:",e)}},children:(0,s.jsx)("span",{className:"menu-icon",children:"⋮"})}),(0,s.jsxs)("div",{className:"dropdown-menu ".concat(a?"show":""),children:[(0,s.jsxs)("div",{className:"menu-item",onClick:()=>en("upload"),children:[(0,s.jsx)("div",{className:"menu-item-icon",children:"\uD83D\uDCE4"}),(0,s.jsx)("span",{children:"Upload Videos"})]}),(0,s.jsxs)("div",{className:"menu-item",onClick:()=>en("manual"),children:[(0,s.jsx)("div",{className:"menu-item-icon",children:"✍"}),(0,s.jsx)("span",{children:"Manual Post"})]}),(0,s.jsxs)("div",{className:"menu-item",onClick:()=>en("autopilot-page"),children:[(0,s.jsx)("div",{className:"menu-item-icon",children:"\uD83D\uDE80"}),(0,s.jsx)("span",{children:"AutoPilot Dashboard"})]}),(0,s.jsxs)("div",{className:"menu-item",onClick:()=>en("settings"),children:[(0,s.jsx)("div",{className:"menu-item-icon",children:"⚙"}),(0,s.jsx)("span",{children:"Settings"})]})]})]}),(0,s.jsxs)("div",{className:"user-profile",children:[(0,s.jsx)("div",{className:"avatar",children:"SM"}),(0,s.jsx)("div",{className:"status-indicator"})]})]})]}),(0,s.jsxs)("div",{id:"instagram-data",className:"platform-data ".concat("instagram"===e?"active":""),children:[(0,s.jsxs)("div",{className:"metrics-grid",children:[(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Followers"}),(0,s.jsx)("div",{className:"metric-icon",children:"\uD83D\uDC65"})]}),(0,s.jsx)("div",{className:"metric-value",children:d.instagram.followers}),(0,s.jsx)("div",{className:"metric-change change-positive",children:"↗ +5.2% this week"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Engagement Rate"}),(0,s.jsx)("div",{className:"metric-icon",children:"❤️"})]}),(0,s.jsx)("div",{className:"metric-value",children:d.instagram.engagement}),(0,s.jsx)("div",{className:"metric-change change-positive",children:"↗ +0.8% from last post"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Reach"}),(0,s.jsx)("div",{className:"metric-icon",children:"\uD83D\uDCCA"})]}),(0,s.jsx)("div",{className:"metric-value",children:d.instagram.reach}),(0,s.jsx)("div",{className:"metric-change change-positive",children:"↗ +12.4% today"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Auto-Post Status"}),(0,s.jsxs)("div",{className:"auto-post-status ".concat("error"===N?"inactive":""),children:[(0,s.jsx)("div",{className:"status-indicator ".concat("running"===N?"pulsing":"")}),"running"===N?"Running...":"success"===N?"Posted!":"error"===N?"Failed":n.autopilot?"Active":"Inactive"]})]}),(0,s.jsxs)("div",{className:"metric-value",children:[n.maxPosts,"/day"]}),(0,s.jsxs)("div",{className:"metric-change",children:["Next post at ",n.postTime," (delay: ",n.repostDelay,"d)"]})]})]}),(0,s.jsxs)("div",{className:"grid-layout",children:[(0,s.jsx)(r,{}),(0,s.jsx)(u,{})]}),(0,s.jsx)("div",{className:"manual-post-panel",style:{marginTop:"20px",display:"flex",justifyContent:"center",gap:"15px"},children:(0,s.jsx)("button",{onClick:er,disabled:b,className:"manual-post-button",style:{backgroundColor:b?"#666":"#E1306C",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",fontWeight:"bold",cursor:b?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(225, 48, 108, 0.3)",transition:"all 0.3s ease",opacity:b?.6:1},onMouseEnter:e=>{b||(e.currentTarget.style.backgroundColor="#C13584",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(225, 48, 108, 0.4)")},onMouseLeave:e=>{b||(e.currentTarget.style.backgroundColor="#E1306C",e.currentTarget.style.transform="translateY(0px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(225, 48, 108, 0.3)")},children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{animation:"spin 1s linear infinite"},children:"⏳"}),"Posting..."]}):(0,s.jsx)(s.Fragment,{children:"⚡ Post Now"})})}),(0,s.jsxs)("div",{className:"grid-layout",children:[(0,s.jsx)(g,{platform:"instagram"}),(0,s.jsx)("div",{})]})]}),(0,s.jsxs)("div",{id:"youtube-data",className:"platform-data ".concat("youtube"===e?"active":""),children:[(0,s.jsxs)("div",{className:"metrics-grid",children:[(0,s.jsxs)("div",{className:"metric-card youtube",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Subscribers"}),(0,s.jsx)("div",{className:"metric-icon youtube",children:"\uD83D\uDCFA"})]}),(0,s.jsx)("div",{className:"metric-value youtube",children:d.youtube.subscribers}),(0,s.jsx)("div",{className:"metric-change change-positive",children:"↗ +3.8% this month"})]}),(0,s.jsxs)("div",{className:"metric-card youtube",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Watch Time"}),(0,s.jsx)("div",{className:"metric-icon youtube",children:"⏱️"})]}),(0,s.jsx)("div",{className:"metric-value youtube",children:d.youtube.watchTime}),(0,s.jsx)("div",{className:"metric-change change-positive",children:"↗ +15.7% hours this week"})]}),(0,s.jsxs)("div",{className:"metric-card youtube",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Views"}),(0,s.jsx)("div",{className:"metric-icon youtube",children:"\uD83D\uDC41️"})]}),(0,s.jsx)("div",{className:"metric-value youtube",children:d.youtube.views}),(0,s.jsx)("div",{className:"metric-change change-positive",children:"↗ +8.3% this week"})]}),(0,s.jsxs)("div",{className:"metric-card youtube",children:[(0,s.jsxs)("div",{className:"metric-header",children:[(0,s.jsx)("span",{className:"metric-title",children:"Auto-Upload"}),(0,s.jsxs)("div",{className:"auto-post-status ".concat("error"===N?"inactive":""),children:[(0,s.jsx)("div",{className:"status-indicator ".concat("running"===N?"pulsing":"")}),"running"===N?"Running...":"success"===N?"Posted!":"error"===N?"Failed":n.autopilot?"Active":"Inactive"]})]}),(0,s.jsxs)("div",{className:"metric-value youtube",children:[n.maxPosts,"/day"]}),(0,s.jsxs)("div",{className:"metric-change",children:["Next upload at ",n.postTime," (delay: ",n.repostDelay,"d)"]})]})]}),(0,s.jsxs)("div",{className:"grid-layout",children:[(0,s.jsx)(r,{}),(0,s.jsx)(u,{})]}),(0,s.jsxs)("div",{className:"grid-layout",children:[(0,s.jsx)(g,{platform:"youtube"}),(0,s.jsx)("div",{})]})]}),(0,s.jsx)("div",{className:"chart-descriptions",children:(0,s.jsxs)("div",{className:"description-container",children:[(0,s.jsx)("h3",{className:"description-title",children:"Dashboard Analytics Overview"}),(0,s.jsxs)("div",{className:"description-grid",children:[(0,s.jsxs)("div",{className:"description-card",children:[(0,s.jsx)("div",{className:"description-icon",children:"\uD83C\uDF0A"}),(0,s.jsx)("h4",{children:"Dynamic Wave Chart"}),(0,s.jsx)("p",{children:"Real-time engagement visualization with adaptive wave patterns. Wave amplitude reflects current engagement levels, while animation speed corresponds to posting volume. Glowing effects indicate new performance records."})]}),(0,s.jsxs)("div",{className:"description-card",children:[(0,s.jsx)("div",{className:"description-icon",children:"\uD83D\uDCCA"}),(0,s.jsx)("h4",{children:"Platform Chart Lines"}),(0,s.jsx)("p",{children:"Interactive status indicators for Instagram (pink) and YouTube (red) autopilot systems. Bar height represents daily post volume configuration, with smooth animations reflecting platform activity and engagement."})]})]}),(0,s.jsxs)("div",{className:"description-legend",children:[(0,s.jsxs)("div",{className:"legend-item",children:[(0,s.jsx)("span",{className:"legend-color pink"}),(0,s.jsx)("span",{children:"Instagram Autopilot"})]}),(0,s.jsxs)("div",{className:"legend-item",children:[(0,s.jsx)("span",{className:"legend-color red"}),(0,s.jsx)("span",{children:"YouTube Autopilot"})]}),(0,s.jsxs)("div",{className:"legend-item",children:[(0,s.jsx)("span",{className:"legend-glow"}),(0,s.jsx)("span",{children:"New Performance Record"})]})]})]})})]})]})}}},e=>{e.O(0,[647,959,441,964,358],()=>e(e.s=344)),_N_E=e.O()}]);